# Деплой / обновление (сервер + PM2)

## 1) Загрузка проекта (rsync)

С локальной машины:

```bash
rsync -az --progress \
  --exclude node_modules \
  /Users/dmitriygordienko/Documents/GitHub/Space-Point/ \
  dmitr@46.138.243.148:/home/dmitr/Space-Point/
```

## 2) Установка зависимостей сервера

с локального устройства одной командой:

```bash
ssh dmitr@46.138.243.148 "cd /home/dmitr/Space-Point/server && npm install"
```

## 4) Запуск / перезапуск PM2

Первый запуск:

```bash
pm2 start src/index.js --name space-point --cwd /home/dmitr/Space-Point/server
pm2 save
pm2 startup
```

Перезапуск после обновлений:

```bash
pm2 restart space-point --update-env
```

## 5) Логи / статус

```bash
pm2 ls
pm2 logs space-point --lines 50
```

## 6) Быстрая проверка

На сервере:

```bash
curl http://127.0.0.1:4000/api/chats -H "Authorization: Bearer <token>"
```
